(this["webpackJsonpreact-minesweeper"]=this["webpackJsonpreact-minesweeper"]||[]).push([[0],{30:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r,c,i,o=t(0),a=t.n(o),u=t(16),s=t.n(u),l=(t(30),t(7)),b=t(25),j=t(10),f=t(3),O=t(13),d={isMine:!1,hasFlag:!1,isOpen:!1,count:0,id:null},h=function(e,n){for(var t=0;t<e;t++)for(var r=0;r<e;r++){n([t,r].join(","),t,r)}},x=function(e,n){for(var t=function(e){var n=e.split(",");return{row:Number(n[0]),col:Number(n[1])}}(e),r=t.row-1;r<=t.row+1;r++)for(var c=t.col-1;c<=t.col+1;c++){if(r>=0||c>=0)n([r,c].join(","),r,c)}},g=function(e,n){if(e[n].isOpen||e[n].hasFlag)return e;var t=Object(f.a)(Object(f.a)({},e[n]),{},{isOpen:!0}),r=Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},n,t));return 0!==t.count||t.isMine?r:v(r,n)},p=function(e,n){if(e[n].isOpen)return e;var t=Object(f.a)(Object(f.a)({},e[n]),{},{hasFlag:!e[n].hasFlag});return Object(f.a)(Object(f.a)({},e),{},Object(O.a)({},n,t))},v=function(e,n){var t=Object(f.a)({},e);return x(n,(function(e){!t[e]||t[e].isMine||t[e].isOpen||(t=g(t,e))})),t},F=function(e,n){var t=function(e){var n={};return h(e,(function(e){n[e]=Object(f.a)(Object(f.a)({},d),{},{id:e})})),n}(e);return n.forEach((function(e){t[e].isMine=!0})),h(e,(function(e){t[e].isMine||x(e,(function(n){t[n]&&t[n].isMine&&(t[e].count+=1)}))})),t},m=function(e){return Object.values(e).some((function(e){return e.isMine&&e.isOpen}))},E=function(e,n){return function(e,n){for(var t=[];t.length<n;){var r=Math.floor(Math.random()*e),c=Math.floor(Math.random()*e),i="".concat(r,",").concat(c);t.includes(i)||t.push(i)}return t}(e,n)},y={board:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:""};switch(n.type){case"RESET_GAME":var t=16,r=E(t,40),c=F(t,r);return Object(f.a)(Object(f.a)({},e),{},{board:c});case"REVEAL_CELL":var i=g(e.board,n.id);return Object(f.a)(Object(f.a)({},e),{},{board:i});case"TOGGLE_FLAG":var o=p(e.board,n.id);return Object(f.a)(Object(f.a)({},e),{},{board:o});default:return e}},w=t(4),_=t(8),B=t(9),C=t(17),L=Object(j.default)(w.Box)(r||(r=Object(C.a)(["\n  background-color: ",";\n  width: 35px;\n  height 35px;\n  margin: 2px;\n  border-radius: 5px;\n  border: 1px solid grey;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),(function(e){return e.theme.colors.greyblue})),k=Object(j.default)(L)(c||(c=Object(C.a)(["\n  background: #efefef;\n  height: 33px;\n  margin: 0;\n  border: 0;\n  color: ",";\n"])),(function(e){var n,t;return function(e){switch(e){case 1:return"#009DB0";case 2:return"#00D2A8";case 3:return"#00D363";case 4:return"#FFB200";case 5:return"#FF6A30";case 6:return"#FF5C17";case 7:return"#FF4838";case 8:return"#FF3625";default:return"#000000"}}(null===e||void 0===e||null===(n=e.children[0])||void 0===n||null===(t=n.props)||void 0===t?void 0:t.textColor)})),S=Object(j.default)(L)(i||(i=Object(C.a)(["\n  height: 33px;\n  margin: 0;\n  border: 0;\n"]))),T=t(1),A=function(e){var n=e.count,t=e.isMine;return Object(T.jsxs)(k,{children:[!t&&Object(T.jsx)(w.Box,{textColor:n,children:0===n?"":n}),t&&Object(T.jsx)(_.a,{icon:B.a,color:"black"})]})},D=function(){return Object(T.jsx)(S,{})},G=function(){return Object(T.jsx)(_.a,{icon:B.c,color:"#FF3625"})},I=function(e){var n=e.id,t=e.count,r=e.isMine,c=e.isOpen,i=e.hasFlag,o=Object(l.b)();return Object(T.jsxs)(L,{onClick:function(){return o(function(e){return{type:"REVEAL_CELL",id:e}}(n))},onContextMenu:function(e){e.preventDefault(),o(function(e){return{type:"TOGGLE_FLAG",id:e}}(n))},children:[!c&&!i&&Object(T.jsx)(D,{}),!c&&i&&Object(T.jsx)(G,{}),c&&Object(T.jsx)(A,{isMine:r,count:t})]})},R=t(20),N=function(){var e=Object(l.c)((function(e){return e.board})),n=Object(l.b)(),t=Object(o.useState)(0),r=Object(R.a)(t,2),c=r[0],i=r[1],a=Object(o.useState)(!0),u=Object(R.a)(a,2),s=u[0],b=u[1],j=function(e){return Object.values(e).filter((function(e){return e.hasFlag})).length}(e),f="playing";(function(e){return!m(e)&&Object.values(e).filter((function(e){return!e.isOpen})).length===Object.values(e).filter((function(e){return e.isMine&&e.hasFlag})).length})(e)&&(f="winner"),m(e)&&(f="lost"),function(e){return 0===Object.values(e).filter((function(e){return e.hasFlag||e.isOpen})).length}(e)&&(f="notPlaying");var O=Object(o.useCallback)((function(){"notPlaying"===f&&(i(0),b(!0)),"playing"===f?(i(s?0:c+1),b(!1)):b(!0)}),[c,f,s]);return Object(o.useEffect)((function(){var e=setInterval((function(){O()}),1e3);return function(){clearInterval(e)}}),[O]),Object(T.jsxs)(w.Flex,{alignItems:"center",justifyContent:"space-between",mb:3,children:[Object(T.jsxs)(w.Box,{width:1/4,children:[Object(T.jsx)(_.a,{icon:B.c,color:"#FF3625"})," ","".concat(j)]}),Object(T.jsx)(w.Box,{role:"button",onClick:function(){return n({type:"RESET_GAME"})},children:function(e){return"lost"===e?Object(T.jsx)(_.a,{icon:B.e,color:"darkgrey",size:"3x"}):"winner"===e?Object(T.jsx)(_.a,{icon:B.f,color:"#00D363",size:"3x"}):Object(T.jsx)(_.a,{icon:B.d,color:"#FFB200",size:"3x"})}(f)}),Object(T.jsxs)(w.Box,{width:1/4,textAlign:"right",children:[Object(T.jsx)(_.a,{icon:B.b,color:"#FFB200"})," ",c]})]})},P=function(){var e=function(e){var n=[],t=Math.sqrt(Object.keys(e).length);return h(t,(function(t,r,c){n[r]||(n[r]=[]),n[r][c]=e[t]})),n}(Object(l.c)((function(e){return e.board})));return Object(T.jsx)(w.Flex,{alignContent:"center",children:Object(T.jsxs)(w.Box,{mx:"auto",children:[Object(T.jsx)(N,{}),e.map((function(e,n){return Object(T.jsx)(w.Flex,{children:e.map((function(e){return Object(T.jsx)(I,Object(f.a)({},e),"mine-cell-".concat(e.id))}))},"mine-row-".concat(n))}))]})})},z=function(){return Object(T.jsxs)(w.Box,{width:1,children:[Object(T.jsx)(w.Box,{py:3,mb:3,sx:{background:"black",textAlign:"center",color:"lightgray"},children:Object(T.jsx)("h1",{children:"Minesweeper"})}),Object(T.jsx)(P,{})]})},V={breakpoints:["40em","52em","64em"],fontSizes:[12,14,16,20,24,32,48,64],colors:{blue:"#07c",lightgray:"#f6f6ff",palelavender:"#d1cfe2",greyblue:"#9cadce"},space:[0,4,8,16,32,64,128,256],fonts:{body:"system-ui, sans-serif",heading:"inherit",monospace:"Menlo, monospace"},fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.25}},X={type:"RESET_GAME"},J=function(){var e=Object(b.a)(M,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());return e.dispatch(X),Object(T.jsx)(l.a,{store:e,children:Object(T.jsx)(j.ThemeProvider,{theme:V,children:Object(T.jsx)(z,{})})})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),i(e),o(e)}))};s.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(J,{})}),document.getElementById("root")),U()}},[[38,1,2]]]);
//# sourceMappingURL=main.07a3e6e3.chunk.js.map